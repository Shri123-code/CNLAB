

import java.net.*;
import java.io.*;
public class SocketServer2 {
    

    
    public static void main(String[] args)  throws Exception{
        ServerSocket servsocket=new ServerSocket(4000);
        System.out.println("****saerver Side***");
        System.out.println("server ready for connection");
        Socket connSock=servsocket.accept();
        System.out.println("Connection is successful and ready for file transfer");
        InputStream istream=connSock.getInputStream();
        BufferedReader fileRead=new BufferedReader(new InputStreamReader(istream));
        String fname=fileRead.readLine();
        File fileName=new File(fname);
        OutputStream ostream=connSock.getOutputStream();
        PrintWriter pwrite=new PrintWriter(ostream,true);
        if(fileName.exists()){
            BufferedReader contentRead=new BufferedReader(new FileReader(fname));
            System.out.println("writing file contents to the socket");
            String str;
            while((str=contentRead.readLine())!=null){
                pwrite.println(str);
                
                
            }
            contentRead.close();
        }else{
            System.out.println("Requested file does not exist");
            String msg="Requested file does not exist at server side";
            pwrite.println(msg);
        }
        connSock.close();
        servsocket.close();
        fileRead.close();
        pwrite.close();
            
            
        }
        
        
        
        
        
        // TODO code application logic here
    }
    

